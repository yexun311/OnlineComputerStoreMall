<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ye.mapper.UserMapper">

    <resultMap id="UserMap" type="com.ye.entity.User">
        <result column="uid" property="uid"/>
        <result column="is_delete" property="isDelete"/>
        <result column="created_user" property="createdUser"/>
        <result column="created_time" property="createdTime"/>
        <result column="modified_user" property="modifiedUser"/>
        <result column="modified_time" property="modifiedTime"/>
    </resultMap>

    <select id="selectUserByUsername" parameterType="String" resultMap="UserMap">
        select * from user where username = #{username}
    </select>

    <update id="updateInfoByUid" parameterType="com.ye.entity.User">
        update user
        set
            <!--if是条件判断标签,属性test接受的是一个返回值为boolean类型的条件,
                如果test条件的结果为true则执行if标签内部的语句,注意逗号也要在标签内-->
            <if test="phone != null and phone != ''">
                phone = #{phone},
            </if>
            <if test="email != null and email != ''">
                email = #{email},
            </if>
            <if test="gender != null and gender != ''">
                gender = #{gender},
            </if>
            modified_user = #{modifiedUser},
            modified_time = #{modifiedTime}
        where
            uid = #{uid}
    </update>

</mapper>